# 多助手协作对话系统

一个基于 OpenAI API 的多助手协作对话系统，支持自定义助手角色、灵活的工作流设计和完整的对话管理。

## 功能特点

- 🤖 多助手管理
  - 预设多个专业领域助手
  - 支持自定义助手配置
  - 灵活的角色定义

- 🔄 工作流设计
  - 支持并行/顺序处理
  - 可视化工作流配置
  - 工作流保存和加载

- 💬 智能对话
  - 多轮对话支持
  - 完整对话历史
  - 对话记录导出

- ⚙️ 系统配置
  - 自定义 API 地址
  - 多模型选择
  - 配置持久化

## 快速开始

1. 启动程序
```bash
python main.py
```

2. 访问界面
```
http://localhost:7860
```

3. 初始化系统
- 输入 OpenAI API Key
- 选择模型 (GPT-3.5/GPT-4)
- 点击初始化系统

## 使用指南

### 助手管理

1. 预设助手
- 代码专家：专注于代码开发和优化
- 审查专家：负责代码审查和质量控制
- 架构专家：系统架构设计和技术选型

2. 创建新助手
- 进入"助手管理"标签页
- 勾选"创建新助手"
- 填写助手信息：
  - 名称
  - 角色
  - 提示词
- 点击"保存配置"

### 工作流设计

1. 创建工作流
- 进入"工作流设计"标签页
- 选择需要的助手
- 添加为并行或顺序步骤
- 设置工作流名称和描述
- 保存工作流

2. 工作流类型
- 并行处理：多个助手同时处理
- 顺序处理：助手按顺序依次处理

### 对话操作

1. 开始对话
- 进入"对话"标签页
- 选择已保存的工作流
- 输入消息开始对话

2. 对话管理
- 查看完整对话历史
- 清空对话记录
- 下载对话记录

## 目录结构

```
├── main.py              # 主程序入口
├── config.yaml          # 配置文件
├── requirements.txt     # 依赖列表
├── conversations/       # 对话记录保存目录
├── workflows.json       # 工作流配置文件
└── chat_assistant.log   # 日志文件
```

## 配置项说明

### API 配置
- `api_key`: OpenAI API 密钥
- `api_base`: API 基础地址
- `model`: 使用的模型 (gpt-3.5-turbo/gpt-4)

### 助手配置
```python
{
    "name": "助手名称",
    "role": "角色描述",
    "prompt": "系统提示词"
}
```

### 工作流配置
```python
{
    "name": "工作流名称",
    "description": "工作流描述",
    "steps": [
        {
            "assistants": ["assistant1", "assistant2"],
            "is_parallel": true
        }
    ]
}
```

## 常见问题

1. API 连接问题
- 检查 API Key 是否正确
- 确认网络连接状态
- 验证 API 基础地址设置

2. 助手配置问题
- 确保助手名称唯一
- 提示词需要清晰明确
- 定期保存配置更改

3. 工作流问题
- 检查工作流步骤设置
- 确保选择了正确的助手
- 验证工作流保存状态
